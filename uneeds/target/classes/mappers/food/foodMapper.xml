<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.food.mapper.FoodMapper">
	<!-- 몽고 음식점 데이터 INSERT -->
	<insert id="insertFood">
		INSERT INTO f_food (lid, fname, fdetail, faddr, fphone, fgmenu, kid, fimg1, fimg2, fimg3)
		VALUES (#{lid}, #{fname}, #{fdetail}, #{faddr}, #{fphone}, #{fgmenu}, #{kid}, #{fimg1}, #{fimg2}, #{fimg3})
	</insert>
	
	<!-- Mysql 음식점 목록 SELECT -->
	<select id="listFood" resultType="com.food.domain.Food_dataVo">
		SELECT * FROM f_food order by fid DESC
	</select>
	
	<!-- Mysql 검색결과 SELECT -->
	<select id="listSearch" resultType="com.food.domain.Food_dataVo">
		SELECT fid, fname, fdetail, faddr, fphone, fgmenu, fimg1, flike FROM f_food where fname like concat('%',#{keyword},'%') OR fdetail like concat('%',#{keyword},'%') OR faddr like concat('%',#{keyword},'%')
		OR fphone like concat('%',#{keyword},'%') OR fgmenu like concat('%',#{keyword},'%') order by fname asc limit #{pageStart}, #{perPageNum}
	</select>
	
	<!-- Mysql 검색결과 카운트 -->
	<select id="listCount" resultType="int">
		SELECT count(*) FROM f_food where fname like concat('%',#{keyword},'%') OR fdetail like concat('%',#{keyword},'%') OR faddr like concat('%',#{keyword},'%')
		OR fphone like concat('%',#{keyword},'%') OR fgmenu like concat('%',#{keyword},'%')
	</select>
	
	<!-- Mysql 음식점 자세히 보기 -->
	<select id="detail" resultType="com.food.domain.Food_dataVo">
		SELECT food.fname, food.faddr, food.fphone, food.fgmenu, food.fimg1, food.fimg2, food.fimg3, food.flike, kind.kname FROM f_food food, f_kind kind where food.fid = #{fid} and food.kid = kind.kid; 
	</select>
</mapper>